# ApneDoctors Voice AI - OPEN SOURCE VERSION
# ðŸ†“ 100% FREE - Zero API Costs

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=3001
NODE_ENV=development

# =============================================================================
# OPEN SOURCE AI SERVICES (All Self-Hosted)
# =============================================================================

# Option 1: Separate Services (Recommended for Production)
# ----------------------------------------------------------

# Whisper Server (Speech-to-Text)
# Start with: python whisper_server.py
WHISPER_API=http://localhost:9000
WHISPER_MODEL=base  # Options: tiny, base, small, medium, large-v3

# Ollama (LLM - Llama 3)
# Start with: ollama serve
OLLAMA_API=http://localhost:11434
OLLAMA_MODEL=llama2  # Options: llama3.1, mistral, mixtral

# Coqui TTS / Piper (Text-to-Speech)
# Coqui: tts-server --model_name tts_models/en/ljspeech/tacotron2-DDC
# Piper: ./piper --model en_US-lessac-medium.onnx
COQUI_TTS_API=http://localhost:5002
TTS_SPEAKER=ljspeech
TTS_LANGUAGE=en

# Option 2: Transformers.js (All-in-One, Runs in Node.js)
# --------------------------------------------------------
# Enable this to run everything in your Node.js app (no Python needed!)
USE_TRANSFORMERS_JS=false  # Set to true to enable

# Option 3: LocalAI (Docker All-in-One)
# --------------------------------------
# Uncomment to use LocalAI instead
# LOCALAI_URL=http://localhost:8080
# USE_LOCALAI=false

# =============================================================================
# FONOSTER TELEPHONY (Same as before)
# =============================================================================

FONOSTER_API_URL=http://localhost:50051
FONOSTER_ACCESS_KEY_ID=your_fonoster_access_key
FONOSTER_ACCESS_KEY_SECRET=your_fonoster_secret_key
FONOSTER_DOMAIN=voice.apnedoctors.com
FONOSTER_INBOUND_NUMBER=+1234567890

# SIP Trunk (still need this for actual phone calls)
SIP_TRUNK_PROVIDER=telnyx
SIP_TRUNK_USERNAME=your_sip_username
SIP_TRUNK_PASSWORD=your_sip_password
SIP_TRUNK_HOST=sip.telnyx.com

# =============================================================================
# N8N WORKFLOW INTEGRATION (Same as before)
# =============================================================================

N8N_WEBHOOK_URL=https://your-n8n-instance.com/webhook

# =============================================================================
# DATABASE (Optional)
# =============================================================================

DB_HOST=localhost
DB_PORT=5432
DB_NAME=apnedoctors_voice
DB_USER=your_db_user
DB_PASSWORD=your_db_password

# =============================================================================
# EMERGENCY CONTACTS (Same as before)
# =============================================================================

EMERGENCY_CONTACT=+1234567890
EMERGENCY_EMAIL=emergency@apnedoctors.com

# =============================================================================
# VOICE AI SETTINGS
# =============================================================================

MAX_CALL_DURATION=1800000  # 30 minutes
ENABLE_CALL_RECORDING=true
RECORDING_STORAGE=local
RECORDING_PATH=/var/apnedoctors/recordings

# =============================================================================
# MODEL PERFORMANCE TUNING
# =============================================================================

# Whisper Settings
WHISPER_BEAM_SIZE=5  # Higher = better quality, slower
WHISPER_COMPUTE_TYPE=int8  # Options: int8, float16, float32

# Ollama Settings  
OLLAMA_NUM_CTX=2048  # Context window size
OLLAMA_TEMPERATURE=0.7  # Creativity (0-1)
OLLAMA_TOP_P=0.9  # Nucleus sampling
OLLAMA_NUM_PREDICT=512  # Max response tokens

# GPU Acceleration (if available)
USE_GPU=false  # Set to true if you have CUDA/ROCm
GPU_DEVICE=0  # GPU device ID

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

LOG_LEVEL=info
SENTRY_DSN=your_sentry_dsn_here

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================

VOICE_AI_WEBHOOK_URL=https://api.apnedoctors.com/voice
VOICE_AI_WEBSOCKET_URL=wss://api.apnedoctors.com/voice/stream

SSL_CERT_PATH=/etc/letsencrypt/live/api.apnedoctors.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/api.apnedoctors.com/privkey.pem

# =============================================================================
# COST TRACKING (Just for fun - it's all free!)
# =============================================================================

MONTHLY_API_COST=0  # ðŸŽ‰
MONTHLY_SERVER_COST=40  # Only hosting
TOTAL_MONTHLY_COST=40  # vs $95-160 with paid APIs!

# =============================================================================
# NOTES
# =============================================================================

# This configuration uses 100% open-source models:
# âœ… Whisper (OpenAI's open model) - Speech recognition
# âœ… Llama 3.1 (Meta's open model) - Language understanding  
# âœ… Coqui/Piper (Open source) - Speech synthesis
# 
# No API keys needed for AI! Just need:
# - Fonoster for telephony (or use Twilio if you prefer)
# - n8n for automation (optional)
# - Server to host everything
#
# Total monthly cost: ~$40 (just server) vs $95-160 with APIs
# At 10,000 calls/month: ~$80 vs $750-1000 with APIs!
